# 📋 FICHIERS À UPLOADER SUR LWS (via FTP)
# Date : 17 octobre 2025
# Modifications : ZB Investments branding + villes dynamiques + notifications email

## 🔴 IMPORTANT : Sauvegarder avant de remplacer !

---

## 📂 DOSSIER 1 : Notifications (app/Notifications/)
📁 Destination LWS : /home/zbinv2677815/laravel-app/app/Notifications/

Uploader ces fichiers :
✅ app/Notifications/AdminResponseNotification.php
✅ app/Notifications/NewContactMessage.php
✅ app/Notifications/NewPropertyMessage.php
✅ app/Notifications/NewAccompanimentRequestNotification.php (NOUVEAU)

---

## 📂 DOSSIER 2 : Livewire Components (app/Livewire/)
📁 Destination LWS : /home/zbinv2677815/laravel-app/app/Livewire/

Uploader ce fichier :
✅ app/Livewire/AccompanimentForm.php

---

## 📂 DOSSIER 3 : Templates Email (resources/views/vendor/mail/)
📁 Destination LWS : /home/zbinv2677815/laravel-app/resources/views/vendor/mail/

Uploader TOUT LE DOSSIER :
✅ resources/views/vendor/mail/html/message.blade.php
✅ resources/views/vendor/mail/text/message.blade.php
✅ resources/views/vendor/mail/ (tout le dossier si inexistant sur LWS)

---

## 📂 DOSSIER 4 : Vue Livewire (resources/views/livewire/)
📁 Destination LWS : /home/zbinv2677815/laravel-app/resources/views/livewire/

Uploader ce fichier :
✅ resources/views/livewire/accompaniment-form.blade.php

---

## ⚠️ APRÈS L'UPLOAD : Vider les caches

### Méthode 1 : Via SSH (recommandé)
```bash
ssh zbinv2677815@ssh.horizonimmo.com
cd /home/zbinv2677815/laravel-app
php artisan config:clear
php artisan cache:clear
php artisan view:clear
php artisan route:clear
php artisan config:cache
php artisan route:cache
php artisan view:cache
```

### Méthode 2 : Via script PHP (si pas d'accès SSH)
Créer un fichier clear-cache-lws.php dans /htdocs/ avec ce contenu :

```php
<?php
require __DIR__.'/../home/zbinv2677815/laravel-app/vendor/autoload.php';
$app = require_once __DIR__.'/../home/zbinv2677815/laravel-app/bootstrap/app.php';
$kernel = $app->make(Illuminate\Contracts\Console\Kernel::class);
$kernel->bootstrap();

echo "Vidage des caches...\n";
Artisan::call('config:clear');
echo "✅ Config cleared\n";
Artisan::call('cache:clear');
echo "✅ Cache cleared\n";
Artisan::call('view:clear');
echo "✅ Views cleared\n";
Artisan::call('route:clear');
echo "✅ Routes cleared\n";

echo "\nReconstruction des caches...\n";
Artisan::call('config:cache');
echo "✅ Config cached\n";
Artisan::call('route:cache');
echo "✅ Routes cached\n";
Artisan::call('view:cache');
echo "✅ Views cached\n";

echo "\n✅ Tous les caches ont été vidés et reconstruits !";
```

Puis accédez à : https://votre-domaine.com/clear-cache-lws.php
⚠️ SUPPRIMER ce fichier après utilisation pour des raisons de sécurité !

---

## 📋 CHECKLIST DE VÉRIFICATION

Après l'upload, vérifiez :

✅ Les emails utilisent "ZB Investments" au lieu de "Horizon Immo"
✅ Le footer des emails affiche les numéros de téléphone :
   - Côte d'Ivoire: +225 07 07 69 69 14 | +225 05 45 01 01 99
   - Afrique du Sud: +27 65 86 87 861
✅ Le formulaire d'accompagnement charge les villes depuis la base de données
✅ Les réponses aux messages sont copiées en BCC vers info@zbinvestments-ci.com
✅ Les nouveaux messages de contact sont envoyés à l'admin avec copie BCC

---

## 🧪 TEST RECOMMANDÉ

1. **Tester le formulaire d'accompagnement** :
   - Vérifier que les villes s'affichent dynamiquement dans le select

2. **Tester l'envoi d'email** :
   - Créer un message de contact test
   - Vérifier que vous recevez une copie dans info@zbinvestments-ci.com
   - Vérifier que le footer affiche "ZB Investments" et les téléphones

3. **Vérifier les caches** :
   - Si des changements ne s'affichent pas, vider les caches à nouveau

---

## 📞 SUPPORT

En cas de problème :
1. Vérifier les logs Laravel : /home/zbinv2677815/laravel-app/storage/logs/laravel.log
2. Vérifier les permissions : storage/ et bootstrap/cache/ doivent être en 775
3. Contacter le support LWS si problème serveur

---

Fin du guide d'upload FTP
